<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Upload Book | OceanBooks</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    body{
      margin:0;
      font-family:'Poppins',sans-serif;
      background:radial-gradient(circle at top,#0a0a0a,#000);
      color:#fff;
      padding:80px 20px;
    }
    header{
      position:fixed;
      top:0;
      left:0;
      width:100%;
      background:rgba(20,20,20,0.8);
      backdrop-filter:blur(12px);
      border-bottom:1px solid rgba(255,255,255,0.08);
      padding:1rem 6%;
      display:flex;
      justify-content:space-between;
      align-items:center;
      z-index:1000;
    }
    header h1{
      font-size:1.6rem;
      background:linear-gradient(90deg,#00ffaa,#00e0ff);
      -webkit-background-clip:text;
      -webkit-text-fill-color:transparent;
      text-shadow:0 0 15px rgba(0,255,255,0.25);
    }
    .nav-links{display:flex;align-items:center;gap:1.2rem;}
    .nav-links a{
      color:#bbb;
      text-decoration:none;
      font-weight:500;
      transition:.25s;
    }
    .nav-links a:hover{
      color:#00ffaa;
      text-shadow:0 0 10px #00ffaa;
    }
    .container{
      max-width:500px;
      margin:100px auto;
      background:rgba(25,25,25,0.85);
      border:1px solid rgba(255,255,255,0.05);
      border-radius:12px;
      padding:2rem;
      box-shadow:0 0 25px rgba(0,255,255,0.1);
    }
    h2{
      text-align:center;
      margin-bottom:1.5rem;
      background:linear-gradient(90deg,#00ffaa,#00e0ff);
      -webkit-background-clip:text;
      -webkit-text-fill-color:transparent;
    }
    form{
      display:flex;
      flex-direction:column;
      gap:1rem;
    }
    input,textarea,button{
      border:none;
      border-radius:8px;
      padding:0.8rem;
      font-size:1rem;
    }
    input,textarea{
      background:#111;
      color:#fff;
      border:1px solid rgba(255,255,255,0.1);
    }
    button{
      background:linear-gradient(90deg,#00ffaa,#00e0ff);
      color:#000;
      font-weight:600;
      cursor:pointer;
      transition:0.3s;
    }
    button:hover{
      filter:brightness(1.2);
    }
  </style>
</head>
<body>

<header>
  <h1><i class="fa-solid fa-upload"></i> Upload Book</h1>
  <nav class="nav-links">
    <a href="/admin/dashboard.html"><i class="fa-solid fa-house"></i> Dashboard</a>
    <a href="/admin/manage.html"><i class="fa-solid fa-gear"></i> Manage</a>
    <a href="/admin/admin.html" style="color:#ff6b6b;"><i class="fa-solid fa-right-from-bracket"></i> Logout</a>
  </nav>
</header>

<div class="container">
  <h2>Upload New Book</h2>
  <form id="uploadForm" enctype="multipart/form-data">
    <input type="text" name="title" placeholder="Book Title" required>
    <input type="text" name="author" placeholder="Author" required>
    <input type="text" name="category" placeholder="Category" required>
    <textarea name="description" placeholder="Short Description" required></textarea>

    <!-- üü¢ FIXED: changed name from 'book_file' to 'file' -->
    <input type="file" name="file" accept=".pdf,.epub,.doc,.docx" required>
    <input type="file" name="thumbnail" accept="image/*" required>

    <button type="submit">Upload</button>
  </form>
</div>

<script>
const API_BASE = "https://new-m97f.onrender.com"; // ‚úÖ your Render backend URL

document.getElementById("uploadForm").addEventListener("submit", async (e) => {
  e.preventDefault();
  const formData = new FormData(e.target);

  try {
    const res = await fetch(`${API_BASE}/api/books`, {
      method: "POST",
      body: formData
    });

    const data = await res.json();
    if (data.success) {
      alert("‚úÖ Book uploaded successfully!");
      e.target.reset();
    } else {
      alert("‚ö†Ô∏è " + (data.error || "Upload failed!"));
    }
  } catch (err) {
    alert("‚ùå Network error. Please try again!");
    console.error(err);
  }
});
</script>

</body>
</html>